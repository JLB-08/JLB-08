<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MQTT</title>
    <!-- add icon link -->
    <link rel="icon" href="https://www.openautomationsoftware.com/wp-content/uploads/2016/05/MQTT-icon.png" type="image/x-icon">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

</head>

<body style="background: white;">

                <div class="card-body text-center">
                    <h2>IOT SWITCH</h2>
                    <h4 id="status">The device is currently stable</h4>
                    <button id="on" class="btn btn-outline-primary">ON</button>
                    <button id="off" class="btn btn-outline-danger">OFF</button>
                </div>
  
</body>
<script src="/browserMqtt.js"></script>
<script src="/controller.js"></script>
<script>
    var connect = "wss://test.mosquitto.org:8081/mqtt";
    client = mqtt.connect(connect);
   
   

    $(document).ready(function () {
        $("#on").click(function (e) {
            e.preventDefault();
            var topic = 'louie/device/status';
            var payload = 'Turned On: '
            client.publish(topic, payload);
            $("#status").html("The device is currently ON");
        })
        $("#off").click(function (e) {
            e.preventDefault();
            var topic = 'louie/device/status';
            var payload = 'Turned Off: '
            client.publish(topic, payload);
            $("#status").html("The device is currently OFF");
        })
    })



</script>
</html>
